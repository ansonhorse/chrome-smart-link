/*!
 * 
 * =======================================================================================
 *   Author:   Anxon <ansonhorse@gmail.com>
 *   Built At: 2017-10-13 00:51:34
 * =======================================================================================
 */
!function(e){function __webpack_require__(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var n={};__webpack_require__.m=e,__webpack_require__.c=n,__webpack_require__.d=function(e,n,t){__webpack_require__.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},__webpack_require__.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,n,t){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=t(1),o=_interopRequireDefault(a),r=t(2),s=_interopRequireDefault(r),c=t(3),u=_interopRequireDefault(c),l=t(4),d=_interopRequireDefault(l),f=t(5),p=_interopRequireDefault(f),h=t(6),m=_interopRequireDefault(h),g=null,b=function(){function Anxon(){_classCallCheck(this,Anxon),g=this,this.utils=o.default,this._isReady=!1,this.options={extensionEnabled:!0},this.const={},this.runtimeOptions={storageEvents:!0,externalMessaging:!1,tabEvents:[],windowsEvent:[]},this.manifest=chrome.runtime.getManifest?chrome.runtime.getManifest():{},this.storage=chrome.storage.local,this.isBackend=_.isFunction(chrome.runtime.getBackgroundPage),this.isFrontend=!this.isBackend,this.init()}return i(Anxon,[{key:"init",value:function(){var e=this,n=window._anxonCommon||{};_.isObject(n.options)&&!_.isEmpty(n.options)&&_.each(n.options,function(n,t){e.options[t]=n}),_.isObject(n.runtimeOptions)&&!_.isEmpty(n.runtimeOptions)&&_.each(n.runtimeOptions,function(n,t){e.runtimeOptions[t]=n}),this.runtimeOptions.storageEvents&&chrome.storage.onChanged.addListener(function(e,n){void 0!==e.options&&(g.options=e.options.newValue)}),n.const&&(g.const=n.const)}},{key:"ready",value:function(){var e={},n=null;if(1===arguments.length&&_.isFunction(arguments[0])?n=arguments[0]:2===arguments.length&&(_.isFunction(arguments[1])&&(n=arguments[1]),_.isObject(arguments[0])&&(e=arguments[0])),g._isReady)return g.options.extensionEnabled?_.isFunction(n)&&n.call(g):console.warn(g.manifest.name+" is not enabled[ready]."),!0;g.storage.get(["initialized","options"],function(t){t.initialized?g.options=t.options:g.initOptions(),g._isReady=!0,e.extensionEnabled||g.options.extensionEnabled?_.isFunction(n)&&n.call(g,t):console.warn(g.manifest.name+" is not enabled.")})}},{key:"initOptions",value:function(){g.storage.set({initialized:!0,options:g.options})}},{key:"clearOptions",value:function(){g.storage.clear()}},{key:"updateOptions",value:function(e){return new Promise(function(n,t){n(g.storage.set({options:e||g.options}))})}},{key:"onOptionsUpdated",value:function(e,n,t){g.options=e}},{key:"onStatusChanged",value:function(e,n,t){g.options.extensionEnabled=e}},{key:"ajax",value:function(e,n){var t=!!e.forceFrontend;if(g.isBackend||t){for(var i={timeout:6e4},a=["url","timeout","type","data","dataType","headers","success","error"],o=0;o<a.length;o++)void 0!==e[a[o]]&&(i[a[o]]=e[a[o]]);i.headers={"X-Requested-With":"XMLHttpRequest"},i.error=function(e,t,i){console.error("ajax error：",arguments);var a={BACKEND_AJAX_ERROR:!0,textStatus:t};_.isFunction(n)&&n(a)},i.success=function(e,t,i){_.isFunction(n)&&n(e)},$.ajax(i)}else _.isFunction(n)&&(e.success=n),anxon.messaging.dispatchMessage("ajax",e,function(n){n.BACKEND_AJAX_ERROR?_.isFunction(e.error)&&e.error(n):_.isFunction(e.success)&&e.success(n)})}}]),Anxon}();window.anxon=new b,anxon.messaging=new s.default,anxon.isBackend?(anxon.tabs=new d.default,anxon.windows=new u.default,anxon.backend=new p.default):anxon.frontend=new m.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={guid:function(){for(var e="",n=1;n<=32;n++){e+=Math.floor(16*Math.random()).toString(16),8!=n&&12!=n&&16!=n&&20!=n||(e+="-")}return e},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},microTimestamp:function(){return(new Date).getTime().toString().replace(".","")},randomNumber:function(e,n){var t=n-e,i=Math.random();return e+Math.round(i*t)},fireEvent:function(e,n){if(document.createEventObject){var t=document.createEventObject();return e.fireEvent("on"+n,t)}var i=document.createEvent("HTMLEvents");return i.initEvent(n,!0,!0),!e.dispatchEvent(i)},copyToClipboard:function(e){var n="__anxon_copy_to_clipboard__",t=document.getElementById(n);t||(t=document.createElement("textarea"),t.id=n,t.setAttribute("style","width:0;height:0;opacity:0;position:fixed;left:0;bottom:0;"),document.body.appendChild(t)),t.value=e,t.select();var i=document.execCommand("copy");return document.activeElement.blur(),i},getQueryString:function(e,n){var t=new RegExp("(\\?|#|&)"+e+"=([^&#]*)(&|#|$)"),i=(n||location.href).match(t);return i?i[2]:""},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=chrome.runtime.getURL("img/anxon-loading.gif");anxon.runtimeOptions.loadingImgSrc&&(t=anxon.runtimeOptions.loadingImgSrc);var i={verticalAlign:"top",marginLeft:5},a={};_.isNumber(e)&&(a={width:e,height:e}),_.each(a,function(e,n){i[n]=e});var o=document.createElement("img");return o.src=t,_.each(i,function(e,n){o.style[n]=e}),n?o.outerHTML:o},whenReady:function(e,n,t){var i=e.length,a=null,o=null,r=6e4,s=100;_.isPlainObject(arguments[0])&&(e=arguments[0].selectors,n=_.isFunction(arguments[0].onReady)?arguments[0].onReady:function(){console.log("Utils.whenReady.onReady default callback:",arguments)},t=_.isFunction(arguments[0].onFail)?arguments[0].onFail:function(){console.log("Utils.whenReady.onFail default callback:",arguments)},r=_.isNumber(arguments[0].expire)?arguments[0].expire:r,s=_.isNumber(arguments[0].interval)?arguments[0].interval:s),a=setTimeout(function(){clearInterval(o),_.isFunction(t)&&t(e)},r),o=setInterval(function(){document.querySelectorAll(e.join(",")).length>=i&&(clearInterval(o),clearTimeout(a),n())},s)},onElementsLoaded:function(){var e=arguments;return new Promise(function(n,t){var i=e,a=null,o=null,r={selectors:null,mustVisible:!1,mustAllLoaded:!1,expire:6e4,interval:200},s=null;if(_.isPlainObject(i[0])?s=i[0]:i.length>=1&&(r.selectors=i[0],i.length>=2&&_.isPlainObject(i[1])&&(s=i[1])),s&&_.each(s,function(e,n){void 0!==r[n]&&(r[n]=e)}),_.isEmpty(r.selectors))return t("Selectors should not be empty!");_.isString(r.selectors)&&(r.selectors=[r.selectors]),r.expire>0&&(a=setTimeout(function(){clearInterval(o),t("[Utils.elementLoaded] Stopped after "+expire+"ms!")},r.expire)),o=setInterval(function(){var e=document.querySelectorAll(r.selectors.join(","));e.length>=r.selectors.length&&(clearInterval(o),clearTimeout(a),n(e))},r.interval)})},injectJsonpCallback:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=anxon.runtimeOptions.id+_.random(1e3,9999),t=document.getElementById("jsonp-callback-"+n);if(!t){t=document.createElement("script"),t.id="jsonp-callback-"+n;var i="var-holder-"+n,a="\n\t\t\t\tfunction jsonpCallback_"+n+" (res) {\n\t\t\t\t\tvar el = document.getElementById('"+i+"');\n\t\t\t\t\tif (!el) {\n\t\t\t\t\t\tel = document.createElement('textarea');\n\t\t\t\t\t\tel.id = '"+i+"';\n\t\t\t\t\t\tel.style.display = 'none';\n\t\t\t\t\t\tdocument.body.appendChild(el);\n\t\t\t\t\t}\n\t\t\t\t\tif (!!"+e+" && (toString.apply(res) === '[object Array]' || toString.apply(res) === '[object Object]'))\n\t\t\t\t\t\tres = JSON.stringify(res);\n\t\t\t\t\tel.value = res;\n\t\t\t\t}\n\t\t\t";return t.innerText=a,document.head.appendChild(t),n}},injectInlineJs:function(e,n,t){var i=document.getElementById("anxon-script-"+e);i||(i=document.createElement("script"),i.id=e,document.head.appendChild(i)),i.innerText=n,t&&setTimeout(function(){i.remove()},t)},injectInlineCss:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e="anxon-style-"+e;var i=document.getElementById(e);return i||(i=document.createElement("style"),i.id=e,_.isEmpty(t)||_.each(t,function(e,n){i.setAttribute(n,e)}),document.head.appendChild(i)),i.innerText=n,i},injectVars:function(e,n){this.whenReady(["head"],function(){var t="";for(var i in e)t+='<pre style="display:none" id="anxon-var-'+i+'">'+JSON.stringify(e[i])+"</pre>";$("body").append(t),_.isFunction(n)&&n()})},injectAssets:function(e){this.whenReady(["head"],function(){"string"==typeof e&&(e=[e]),console.log("Assets as following will be injected!");for(var n in e){var t=e[n],i=t.substr(t.lastIndexOf(".")+1),a=null;"js"===i?(a=document.createElement("script"),a.setAttribute("charset","utf-8"),a.src=chrome.runtime.getURL(t)):"css"===i&&(a=document.createElement("link"),a.href=chrome.runtime.getURL(t)),a&&document.head.appendChild(a)}})},injectScriptsSync:function(e,n,t){if(_.isArray(e)&&e){n=void 0===n?0:n;var i=e[n],a=null;a=document.createElement("script"),a.setAttribute("charset","utf-8"),a.src=chrome.runtime.getURL(i),a.onload=function(){n<e.length-1?anxon.utils.injectScriptsSync(e,n+1,t):_.isFunction(t)&&t()},a.onerror=function(t){console.error("[anxon.utils.injectScriptsSync failed：",e[n],t)},document.head.appendChild(a)}},getWindowVar:function(e){if("undefined"!=typeof unsafeWindow&&void 0!==unsafeWindow[e])return unsafeWindow[e];if("undefined"!=typeof window&&void 0!==window[e])return window[e];try{var n=Math.random().toString().substr(2),t="getWindowVar-"+n,i="__DOUBLE_QUOTE__"+n,a=null,o=document.createElement("pre");o.id=t,o.style.display="none",document.body.appendChild(o);var r="\n\t\t\t\t\tdocument.getElementById('"+t+"').innerText = (typeof "+e+" !== 'undefined') ? JSON.stringify("+e+").replace(/&quot;/g, '"+i+"') : '';\n\t\t\t\t";return this.injectInlineJs("anxon-js-"+n,r),a=o.textContent.replace(new RegExp(i,"g"),'\\"'),document.querySelector("#anxon-js-"+n).remove(),o.remove(),JSON.parse(a)}catch(e){return console.error("Utils.getWindowVar:",e),null}},getVarHolderContent:function(e){var n=document.querySelector("#anxon-var-holder-"+e);return n?n.textContent:null},getChromeVersion:function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}}},function(e,n,t){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=null,o=function(){function ChromeMessaging(){_classCallCheck(this,ChromeMessaging),a=this,this.listeners={},chrome.runtime.onMessage.addListener(this.onMessage),anxon.isBackend&&anxon.runtimeOptions.externalMessasing&&chrome.runtime.onMessageExternal.addListener(this.onMessage)}return i(ChromeMessaging,[{key:"addListener",value:function(e,n){void 0===this.listeners[e]&&(this.listeners[e]=[]),_.isFunction(n)?this.listeners[e].push(n):console.warn("[Anxon ChromeMessaging.addListener] not a function:",e,n)}},{key:"on",value:function(e,n){void 0===this.listeners[e]&&(this.listeners[e]=[]),_.isFunction(n)?this.listeners[e].push(n):console.warn("[Anxon ChromeMessaging.on] not a function:",e,n)}},{key:"onMessage",value:function(e,n,t){switch(e.tag){case"transitMessage":return a.transitMessage(e.data.type,e.data.data,function(e){t(e)}),!0;case"ajax":return anxon.ajax(e.data,function(e){t(e)}),!0;case"statusChanged":return anxon.onStatusChanged(e.data.enabled,n,t);case"optionsUpdated":return anxon.onOptionsUpdated(e.data.options,n,t);default:var i=a.listeners[e.tag];return _.isArray(i)&&_.each(i,function(i){_.isFunction(i)&&i(e.data,n,t)}),!0}}},{key:"transitMessage",value:function(e,n,t){console.log("Backend.transitMessage:",e,n),"tab_to_tab"===e?anxon.messaging.dispatchToTab(n.args.tabId,n.args.tag,n.args.data,function(e){t(e)}):"tab_to_tabs"===e&&anxon.messaging.dispatchToTabs(n.args.queryInfo,n.args.tag,n.args.data,function(e){t(e)})}},{key:"dispatchMessage",value:function(e,n,t){if(chrome.runtime.sendMessage({tag:e,data:n},function(e){_.isFunction(t)&&t(e)}),anxon.isBackend){var i=this.listeners[e];_.isArray(i)&&_.each(i,function(e){_.isFunction(e)&&e(n,null,t)})}}},{key:"dispatchToTab",value:function(e,n,t,i){e=parseInt(e),anxon.isBackend?chrome.tabs.get(e,function(a){a?chrome.tabs.sendMessage(e,{tag:n,data:t},function(e){_.isFunction(i)&&i(e)}):console.error("[ChromeMessaging.dispatchToTab] tab (id="+e+") not found!")}):this.dispatchMessage("transitMessage",{type:"tab_to_tab",data:{tag:n,args:{tabId:e,tag:n,data:t}}},function(e){_.isEmpty(e)?console.log("[ChromeMessaging.dispatchToTab] tab_to_tab, no response."):void 0!==e.TRANSIT_MESSAGE_ERROR?console.error("[ChromeMessaging.dispatchToTab] tab_to_tab, error response:",e):_.isFunction(i)&&i(e)})}},{key:"dispatchToTabs",value:function(e,n,t,i){var a=[];return _.isNumber(e)?a.push(e):_.isArray(e)&&(a=e),a.length?this._toTabsById(a,n,t,i):_.isObject(e)?this._toTabsByQuery(e,n,t,i):void 0}},{key:"_toTabsById",value:function(e,n,t,i){_.each(e,function(e){a.dispatchToTab(e,n,t,i)})}},{key:"_toTabsByQuery",value:function(e,n,t,i){anxon.isBackend?chrome.tabs.query(e,function(e){e.length&&_.each(e,function(e){a.dispatchToTab(e.id,n,t,i)})}):this.dispatchMessage("transitMessage",{type:"tab_to_tabs",data:{tag:n,args:{queryInfo:e,tag:n,data:t}}},function(e){_.isEmpty(e)?console.log("[ChromeMessaging.dispatchToTab] tab_to_tabs, no response."):void 0!==e.TRANSIT_MESSAGE_ERROR?console.error("[ChromeMessaging.dispatchToTab] tab_to_tabs, error response:",e):_.isFunction(i)&&i(e)})}}]),ChromeMessaging}();n.default=o},function(e,n,t){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=function(){function ChromeWindows(){_classCallCheck(this,ChromeWindows),this.argumentsSorted=["windowId","getInfo","createData","updateInfo","callback"],this.init()}return i(ChromeWindows,[{key:"init",value:function(){anxon.messaging.addListener("windows",this.commander)}},{key:"obj2arr",value:function(e){var n=[],t=[];if(_.isObject(e)){for(var i in this.argumentsSorted)n.push(e[this.argumentsSorted[i]]);_.each(n,function(e,n){void 0!==e&&t.push(e)})}else t=e;return t}},{key:"commander",value:function(e,n,t){anxon.isBackend?(_.isFunction(e.args.callback)||(e.args.callback=function(e){t(e)}),this.execute(e.method,e.args)):anxon.messaging.dispatchMessage("windows",e,function(e){console.warn("[ChromeWindows.execute] response:",e)})}},{key:"execute",value:function(e,n){chrome.windows[e].apply(chrome.windows,this.obj2arr(n))}}]),ChromeWindows}();n.default=a},function(e,n,t){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=function(){function ChromeTabs(){_classCallCheck(this,ChromeTabs),this.argumentsSorted=["windowId","getInfo","createData","updateInfo","callback"],this.init()}return i(ChromeTabs,[{key:"init",value:function(){anxon.isFrontend?anxon.messaging.addListener("injectScripts",this.injectScripts):anxon.messaging.addListener("tabs",this.commander)}},{key:"obj2arr",value:function(e){var n=[],t=[];if(_.isObject(e)){for(var i in this.argumentsSorted)n.push(e[this.argumentsSorted[i]]);_.each(n,function(e,n){void 0!==e&&t.push(e)})}else t=e;return t}},{key:"commander",value:function(e,n,t){anxon.isBackend?(_.isFunction(e.args.callback)||(e.args.callback=function(e){t(e)}),this.execute(e.method,e.args)):anxon.messaging.dispatchMessage("tabs",e,function(e){console.warn("[ChromeTabs.execute] response:",e)})}},{key:"execute",value:function(e,n){var t=[];_.each(n,function(e,n){t.push(e)}),chrome.tabs[e].apply(chrome.tabs,t)}},{key:"injectScripts",value:function(e,n,t){console.log("ChromeTabs.injectScripts",e),anxon.utils.whenReady(['meta[name="yta-ext-id"'],function(){anxon.utils.injectScriptsSync(e.scripts,0,function(){t()})})}}]),ChromeTabs}();n.default=a},function(e,n,t){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=null,o=function(){function Backend(){_classCallCheck(this,Backend),a=this,this.tabServices={},this.tabServicesMap={},this.init()}return i(Backend,[{key:"init",value:function(){this.setListeners()}},{key:"setListeners",value:function(){anxon.runtimeOptions.tabEvents&&_.each(anxon.runtimeOptions.tabEvents,function(e){var n=e.replace(/^on/,"onTab");console.log(n),_.isFunction(a[n])&&chrome.tabs[e].addListener(a[n])}),anxon.runtimeOptions.windowEvents&&_.each(anxon.runtimeOptions.windowEvents,function(e){var n=e.replace(/^on/,"onWindow");_.isFunction(a[n])&&chrome.windows[e].addListener(a[n])}),anxon.messaging.addListener("registerTabService",this.registerTabService),anxon.messaging.addListener("invokeTabService",this.invokeTabService)}},{key:"registerTabService",value:function(e,n,t){n.tab&&(e.tab=n.tab,e.tabId=n.tab.id,a.tabServices[e.serviceName]=e,a.tabServicesMap[e.tabId]=e.serviceName,t({status:1,message:"Tab Service registered successfully!",service:e}))}},{key:"invokeTabService",value:function(e,n,t){console.log("invokeTabService",e);var i=a.tabServices[e.serviceName],o=i?i.tabId:null;if(o)try{chrome.tabs.get(o,function(n){n?e.urlStartsWith&&0!==n.url.indexOf(e.urlStartsWith)?t({status:0,message:"The url of the service tab changed！",flag:"SERVICE_UNAVAILABLE"}):anxon.messaging.dispatchToTab(o,e.tag,e.data,function(e){console.log("invokeTabService response:",e),t(e)}):t({status:0,message:"Service Tab not found!",flag:"SERVICE_UNAVAILABLE"})})}catch(e){t({status:0,message:"Service Tab not found!",flag:"SERVICE_UNAVAILABLE"})}else t({status:0,message:"Service is not registered！",flag:"SERVICE_UNAVAILABLE"})}},{key:"onTabCreated",value:function(e){e.tabId=e.id;var n={tab:e};anxon.messaging.dispatchToTab(e.id,"tabCreated",n,function(e){})}},{key:"onTabUpdated",value:function(e,n,t){t.tabId=e;var i={tabId:e,tab:t,changeInfo:n};anxon.messaging.dispatchToTab(t.id,"tabUpdated",i,function(e){})}},{key:"onTabRemoved",value:function(e,n){var t={tab:{id:e,tabId:e},tabId:e,removeInfo:n};anxon.messaging.dispatchMessage("tabRemoved",t,function(e){}),a.tabServicesMap[e]&&(a.tabServices[a.tabServicesMap[e]]&&delete a.tabServices[a.tabServicesMap[e]],delete a.tabServicesMap[e])}},{key:"onWindowRemoved",value:function(e){var n={windowId:e};anxon.messaging.dispatchMessage("windowRemoved",n,function(){})}},{key:"dispatchEventMessage",value:function(e,n){var t=anxon.messaging.listeners[e];_.isArray(t)&&_.each(t,function(e){_.isFunction(e)&&e(n)})}}]),Backend}();n.default=o},function(e,n,t){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),a=null,o=function(){function Frontend(){_classCallCheck(this,Frontend),a=this,this.isFrame=window.top!==window,this.tab=null,this.hasTabInfoInjected=!1,this.init()}return i(Frontend,[{key:"init",value:function(){this.commonClickListener(),this.onTabUpdated()}},{key:"onTabUpdated",value:function(){anxon.messaging.addListener("tabUpdated",function(e,n,t){a.tab=e.tab,a.hasTabInfoInjected||(a.hasTabInfoInjected=!0,anxon.utils.whenReady(["head"],function(){var n='\n            <meta name="anxon_ext_id_'+anxon.runtimeOptions.id+'" content="'+chrome.runtime.id+'">\n            <meta name="anxon_tab_id_'+anxon.runtimeOptions.id+'" content="'+e.tab.tabId+'">\n          ';$("head").append(n)}))})}},{key:"commonClickListener",value:function(){anxon.utils.whenReady(["body"],function(e){$("body").on("click","[anxon-method]",function(){var n=$(this),t=n.attr("anxon-module"),i=n.attr("anxon-method");if(!t&&!i)return!1;if(t&&i){if(_.isObject(anxon[t])&&_.isFunction(anxon[t][i]))return anxon[t][i](this,e);console.error("Anxon commmon click event: can not resolve: anxon."+t+" or anxon."+t+"."+i+"!")}else if(!t&&i){if(_.isFunction(window[i]))return window[i](this,e)}else console.error("Anxon common click event, can not resolve module.method - ",["anxon",t,i].join(".")+" or "+["window",i].join("."))})})}}]),Frontend}();n.default=o}]);